# MSS Test Manager 웹 기능 테스트 시나리오

아래 시나리오는 현재 구현된 백엔드/프론트엔드 및 명세(`*spec.md`)를 기준으로 작성되었다. 각 항목 옆 체크박스는 실제 테스트 수행 후 성공 여부를 표시한다.

## 인증 및 전역 내비게이션
- [ ] **로그인 성공/실패 처리**
  1. `/login`에서 유효한 사용자명/비밀번호 입력 후 로그인한다.
  2. 응답 토큰이 Pinia 스토어와 `localStorage`에 저장되고 보호된 라우트로 리디렉션되는지 확인한다.
  3. 잘못된 자격 증명 시 에러 메시지가 노출되는지 확인한다.
- [ ] **보호 라우트 접근 차단**
  1. 토큰이 없는 상태에서 `/`, `/rtd`, `/ezdfs`, `/mypage`, `/admin`에 직접 접근한다.
  2. 라우터 가드가 동작하여 `/login`으로 이동하는지 확인한다.
- [ ] **사이드바 로그아웃**
  1. 로그인 후 사이드바의 로그아웃 버튼을 클릭한다.
  2. 토큰 삭제 및 로그인 화면 이동 여부를 확인한다.

## RTD 테스트 플로우 (`/rtd`)
- [ ] **사업부/라인/Rule 선택 및 세션 저장**
  1. 사업부 드롭다운에서 값을 선택하면 하위 상태가 초기화되는지 확인한다.
  2. 선택한 사업부에 대해 라인 목록이 로드되고 라디오 선택 시 Rule 목록이 갱신되는지 확인한다.
  3. Rule 선택 후 Old/New 버전이 조회되며, 모든 선택 값이 `/api/rtd/session`에 저장되는지 확인한다.
- [ ] **타겟 라인 선택 및 중복 실행 방지**
  1. 타겟 라인 전체 선택/개별 선택이 동작하는지 확인한다.
  2. 선택 후 `Test 실행` 버튼을 눌러 작업 생성 및 초기 상태 테이블을 확인한다.
  3. 진행 중 라인이 있을 때 버튼이 비활성화되어 중복 실행을 막는지 확인한다.
- [ ] **상태 폴링 및 단계 전환**
  1. 1초 주기로 상태를 폴링하여 진행률이 갱신되는지 확인한다.
  2. 모든 라인이 `SUCCESS`가 되면 자동으로 단계 6으로 이동하는지 확인한다.
- [ ] **Raw/종합 결과 다운로드**
  1. 라인별 상태가 `SUCCESS`일 때 Raw 다운로드 버튼을 눌러 경로 알림을 확인한다.
  2. 변경점 텍스트 입력 후 종합 결과 생성/다운로드 버튼을 누르면 요약 파일 경로가 알림으로 표시되고 단계 7로 이동하는지 확인한다.
- [ ] **세션 초기화 및 마이페이지 이동**
  1. `세션 초기화` 버튼으로 `/api/rtd/session`이 초기화되고 스텝/선택 값이 리셋되는지 확인한다.
  2. 단계 7에서 `마이페이지로 이동`을 선택하면 `/mypage`로 이동하는지 확인한다.

## ezDFS 테스트 플로우 (`/ezdfs`)
- [ ] **타겟 카드 관리와 Rule 로드**
  1. 초기 타겟 카드에서 서버 선택 시 Rule 목록이 해당 서버 기준으로 갱신되는지 확인한다.
  2. `+ 타겟 서버 추가`로 카드가 추가되고, 삭제 버튼이 카드 개수가 2개 이상일 때만 노출되는지 확인한다.
- [ ] **즐겨찾기 사용/저장**
  1. `/api/ezdfs/favorites`에서 불러온 즐겨찾기 태그가 표시되는지 확인한다.
  2. 카드의 `⭐ 즐겨찾기 적용`으로 Rule이 적용되고, `즐겨찾기 저장`으로 신규 Rule이 목록에 추가되는지 확인한다.
- [ ] **테스트 실행 및 진행 상태**
  1. 하나 이상의 유효한 타겟을 선택한 뒤 `Test.jar 수행`을 누르면 작업이 생성되고 상태 테이블이 표시되는지 확인한다.
  2. 실행 중에는 버튼이 비활성화되고, 폴링이 완료되면 `SUCCESS` 상태로 변경되는지 확인한다.
- [ ] **결과 다운로드/요약 및 세션 동기화**
  1. 완료 후 모듈별 Raw 다운로드 버튼을 눌러 경로 알림을 확인한다.
  2. 변경점 입력 후 종합 결과 생성/다운로드 알림을 확인한다.
  3. 입력한 타겟/요약 내용이 `/api/ezdfs/session`을 통해 저장·복원되는지 확인한다.
- [ ] **세션 초기화**
  1. `세션 초기화` 버튼을 눌러 모든 타겟/상태/요약 값이 초기 상태로 돌아가는지 확인한다.

## 마이페이지 (`/mypage`)
- [ ] **비밀번호 변경**
  1. 기존/새 비밀번호를 입력해 `/api/auth/password` 호출 시 성공 메시지가 노출되고 입력 필드가 비워지는지 확인한다.
  2. 실패 시 에러 메시지가 표시되는지 확인한다.
- [ ] **최근 테스트 결과 조회/재다운로드**
  1. 최근 RTD/ezDFS 결과가 있을 경우 Task ID, 상태, 시각이 표시되는지 확인한다.
  2. `Download Again` 클릭 시 Raw 경로 알림이 뜨는지 확인한다.

## Admin 대시보드 (`/admin`)
- [ ] **사용자 승인/권한 관리**
  1. 사용자 목록이 로드되고 `Approve`/`Revoke` 및 `Promote`/`Demote` 버튼이 동작해 상태가 갱신되는지 확인한다.
- [ ] **호스트 설정 CRUD**
  1. IP/user_id/password 입력 후 추가하면 목록에 표시되는지 확인한다.
  2. 삭제 시 관련 참조가 있을 경우 백엔드에서 오류를 반환하는지 확인한다.
- [ ] **RTD 설정 CRUD**
  1. line_name/line_id/business_unit/home_dir_path/host/modifier 입력 후 추가하면 목록에 나타나는지 확인한다.
  2. 항목 삭제가 정상 반영되는지 확인한다.
- [ ] **ezDFS 설정 CRUD**
  1. module_name/port/home_dir_path/host/modifier 입력 후 추가하면 목록에 나타나는지 확인한다.
  2. 항목 삭제가 정상 반영되는지 확인한다.

## 공통 세션/상태 유지 확인
- [ ] **새로고침 시 세션 복원**
  1. RTD/ezDFS 페이지에서 선택 값을 입력한 뒤 새로고침한다.
  2. 각각 `/api/rtd/session`, `/api/ezdfs/session`에 저장된 값이 로드되어 UI 상태가 복원되는지 확인한다.
- [ ] **작업 결과 저장/조회**
  1. RTD/ezDFS 실행이 완료되면 요약/Raw 경로가 DB에 기록되는지 확인한다.
  2. 마이페이지에서 최근 결과를 조회해 동일한 경로 정보를 확인한다.
